<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="index.js" type="text/javascript"></script>

  <title>
    Projet JS
  </title>
</head>

<body>
  <script>
    const root = document.querySelector('body');
    createElement('h1', { text: "Bienvenu sur le site des NFT", myclass: 'name' }, root);

    (async () => {
      async function dataFetching(url) {
        const raw = await fetch(url);
        const { assets } = await raw.json();
        return assets;
      }
      createElement('div', { myclass: 'allentities' }, root);
      const allentities = document.getElementsByClassName('allentities')[0];
      let n = 0;
      try {
        const assets = await dataFetching("https://awesome-nft-app.herokuapp.com/")
        assets.map(({ name, image_url, id }) => {
          createElement('div', { myclass: 'entitie' }, allentities);
          const div = document.getElementsByClassName('entitie')[n];
          n++;
          createElement('h2', { text: name, color: 'red', myclass: 'name' }, div);
          createElement('a', { myclass: 'favorite' }, div);
          if (image_url) {
            createElement('img', { imgsrc: image_url, myclass: 'image' }, div);
          }
          createElement('button', { text: "Voir la fiche d√©tails", myonclick: `window.location.href='product.html?id=${id}'`, myclass: 'button' }, div);
        })

      } catch (error) {
        console.log(error);
      }
      const datasLoadedEvent = new Event('datasLoaded')
      document.dispatchEvent(datasLoadedEvent)
    })();

  </script>
</body>


</html>
